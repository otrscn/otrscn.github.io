<html><head>
<!-- otrs.github.io -->
<link href="https://cdn.css.net/libs/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.css.network/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://cdn.css.net/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>流程管理</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="OTRS 5 - 系统管理员手册"><link rel="up" href="customization.html" title="Chapter 5. 定制"><link rel="prev" href="customization.html" title="Chapter 5. 定制"><link rel="next" href="themes.html" title="创建你自己的主题"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">流程管理</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="customization.html">Prev</a> </td><th width="60%" align="center">Chapter 5. 定制</th><td width="20%" align="right"> <a accesskey="n" href="themes.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="process-management"></a>流程管理</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="process-management.html#id-1.7.3.2">介绍</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.3">流程示例</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.3.3">记录需求</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.3.4">经理审批</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.3.5">采购部处理</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.3.6">收发室处理</a></span></dt></dl></dd><dt><span class="section"><a href="process-management.html#id-1.7.3.4">实施示例</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.4.15">流程(作为容器)</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.4.16">活动对话框</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.4.17">转换</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.4.18">转换操作</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.4.19">活动</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.4.20">书籍采购流程路径</a></span></dt></dl></dd><dt><span class="section"><a href="process-management.html#id-1.7.3.5">流程配置参考</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2">流程</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.3">流程配置</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.4">名称</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.5">创建时间</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.6">创建人</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.7">修改时间</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.8">修改人</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.9">状态</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.10">起始活动</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.11">起始活动对话框</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.2.12">路径</a></span></dt></dl></dd><dt><span class="section"><a href="process-management.html#id-1.7.3.5.3">活动</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.5.3.3">活动配置</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.3.4">名称</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.3.5">创建时间</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.3.6">创建人</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.3.7">修改时间</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.3.8">修改人</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.3.9">活动对话框</a></span></dt></dl></dd><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4">活动对话框</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.3">活动对话框配置</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.4">名称</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.5">创建时间</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.6">创建人</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.7">修改时间</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.8">修改人</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.9">字段</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.10">字段顺序</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.11">提交建议文本</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.4.12">提交按钮文本</a></span></dt></dl></dd><dt><span class="section"><a href="process-management.html#id-1.7.3.5.5">转换</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.5.5.3">转换配置</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.5.4">名称</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.5.5">创建时间</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.5.6">创建人</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.5.7">修改时间</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.5.8">修改人</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.5.9">条件</a></span></dt></dl></dd><dt><span class="section"><a href="process-management.html#id-1.7.3.5.6">转换操作</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.5.6.3">转换操作配置</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.6.4">名称</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.6.5">模块</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.6.6">配置</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.6.7">重复使用转换操作模块</a></span></dt><dt><span class="section"><a href="process-management.html#available-transition-actions">可用的转换操作</a></span></dt></dl></dd><dt><span class="section"><a href="process-management.html#process-management-acl">访问控制列表（ACL）</a></span></dt><dd><dl><dt><span class="section"><a href="process-management.html#id-1.7.3.5.7.3">ACL 配置</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.7.4">001-ACL-ProcessProperties</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.7.5">流程</a></span></dt><dt><span class="section"><a href="process-management.html#id-1.7.3.5.7.6">可能的/不可能的 活动对话框</a></span></dt></dl></dd></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.7.3.2"></a>介绍</h3></div></div></div><p>
            可以利用OTRS系统定制流程(工作流)模型。基本思路在于定义可重复执行的流程，并将工作内容指派给不同的人员，同时确保流程按照预期进入不同阶段并最终顺利完成。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.7.3.3"></a>流程示例</h3></div></div></div><p>
            让我们看一个例子，更易于阐述流程管理。我们将定义一个订书流程：
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.3.3"></a>记录需求</h4></div></div></div><p>
                在生成订单之前，雇员对书籍的需求将被记录。下列书籍是我们示例中所需要的：
            </p><p>
                </p><pre class="screen">
标题: Prozessmanagement für Dummies
作者: Thilo Knuppertz
ISBN: 3527703713
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.3.4"></a>经理审批</h4></div></div></div><p>
                部门经理需要确认需求。若经理拒绝，需要记录决定原因。若同意，流程将会跳转到采购部。
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.3.5"></a>采购部处理</h4></div></div></div><p>
                现在采购人员需要找出如何以最好的条件购买所需书籍。若书籍缺货，需要在工单中进行记录。如果成功下单，将需要记录供应商、售价与交货时间。
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.3.6"></a>收发室处理</h4></div></div></div><p>
                这批货物将到达公司。进货部门负责检查货物，并记录货品到达日期。接着员工将被告知他们的订单已经到达，并已准备好进行接收。
            </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.7.3.4"></a>实施示例</h3></div></div></div><p>
            假设在这个工作流中，工单可以像随同文档一样接收变更记录，那么我们就有了很清晰的工单处理流程图。
        </p><p>
            通过示例流程分析，我们可以确定下列需要的条目：
        </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        数据记录功能，我们称其为<span class="emphasis"><em>Activity Dialogs 活动对话框</em></span>，
                    </p></li><li class="listitem"><p>
                        根据数据变化自动反应的检查，我们称之为<span class="emphasis"><em>Transitions 转换</em></span>，
                    </p></li><li class="listitem"><p>
                        在流程单成功转换后，对流程工单的变更，我们称之为 <span class="emphasis"><em>Transition Actions 转换操作</em></span>。
                    </p></li></ul></div><p>
        </p><p>
            我们同样还需要一些不那么复杂的额外项：
        </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        可能存在不止一个活动对话框(Activity Dialog)。在示例中，经理必须在"Approve 同意" 与 "Deny
拒绝"中做出决定。我们称之为<span class="emphasis"><em>Activity 活动</em></span>。
                    </p></li></ul></div><p>
        </p><p>
            现在，结合活动(Activities)、活动对话框(Activity Dialogs)、转换(Transitions)与转换操作(Transition
Actions)，我们可以对示例的各个独立步骤进行建模。现在还缺少为每个工作流步骤设置具体顺序。我们称之为<span class="emphasis"><em>Process
流程</em></span>。为了能在之后指代所有这些实体，我们将分配给他们括号中的缩写。这个缩写基于内部识别机制EntityID。
        </p><p>
            EntityID以1~2个字母开头(取决于流程组件或实体)，接着跟随连续编号，例如：
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>流程: 'P1', 'P2' ... 'Pn'.</p></li><li class="listitem"><p>活动: 'A1', 'A2' ... 'An'.</p></li><li class="listitem"><p>活动对话框: 'AD1', 'AD2' ... 'ADn'.</p></li><li class="listitem"><p>Transition: 'T1', 'T2' ... 'Tn'.</p></li><li class="listitem"><p>转换操作: 'TA1', 'TA2' ... 'TAn'.</p></li></ul></div><p>
        </p><p>
           在新建流程和相关内容之前，需要提前准备好系统，我们需要定义一些队列、客户联系人和动态字段，还需要在系统配置中设置一些参数。
        </p><p>
            创建如下队列：
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>管理</p></li><li class="listitem"><p>员工</p></li><li class="listitem"><p>采购</p></li><li class="listitem"><p>邮局</p></li></ul></div><p>
        </p><p>
            创建如下用户：
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>经理</p></li><li class="listitem"><p>员工</p></li></ul></div><p>
        </p><p>
            创建如下动态字段：
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>标题</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td align="left">标签</td><td align="left">标题</td></tr><tr><td align="left">类型</td><td align="left">文本</td></tr><tr><td align="left">对象</td><td align="left">工单</td></tr></tbody></table></div></li><li class="listitem"><p>作者</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td align="left">标签</td><td align="left">作者</td></tr><tr><td align="left">类型</td><td align="left">文本</td></tr><tr><td align="left">对象</td><td align="left">工单</td></tr></tbody></table></div></li><li class="listitem"><p>ISBN</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td align="left">标签</td><td align="left">ISBN</td></tr><tr><td align="left">类型</td><td align="left">文本</td></tr><tr><td align="left">对象</td><td align="left">工单</td></tr></tbody></table></div></li><li class="listitem"><p>状态</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td align="left">标签</td><td align="left">状态</td></tr><tr><td align="left">类型</td><td align="left">下拉选项框</td></tr><tr><td align="left">对象</td><td align="left">工单</td></tr><tr><td align="left">可能的值</td><td align="left">
                                        <div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>审批</p></li><li class="listitem"><p>审批拒绝</p></li><li class="listitem"><p>通过审批</p></li><li class="listitem"><p>采购拒绝</p></li><li class="listitem"><p>生成订单</p></li><li class="listitem"><p>货品收到</p></li></ul></div>
                                    </td></tr></tbody></table></div><p>
                        注意：需要在创建动态字段的“键”和“值”时尽可能使用最接近的值。
                    </p></li><li class="listitem"><p>供应商</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td align="left">标签</td><td align="left">供应商</td></tr><tr><td align="left">类型</td><td align="left">文本</td></tr><tr><td align="left">对象</td><td align="left">工单</td></tr></tbody></table></div></li><li class="listitem"><p>价格</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td align="left">标签</td><td align="left">价格</td></tr><tr><td align="left">类型</td><td align="left">文本</td></tr><tr><td align="left">对象</td><td align="left">工单</td></tr></tbody></table></div></li><li class="listitem"><p>交货日期</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td align="left">标签</td><td align="left">交货日期</td></tr><tr><td align="left">类型</td><td align="left">日期</td></tr><tr><td align="left">对象</td><td align="left">工单</td></tr></tbody></table></div></li><li class="listitem"><p>收货日期</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td align="left">标签</td><td align="left">收货的日期</td></tr><tr><td align="left">类型</td><td align="left">日期</td></tr><tr><td align="left">对象</td><td align="left">工单</td></tr></tbody></table></div></li></ul></div><p>
        </p><p>
            在系统配置(SysConfig)中设置：
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'Ticket::Responsible': 是</p></li><li class="listitem"><p>
                        'Ticket::Frontend::AgentTicketZoom###ProcessWidgetDynamicFieldGroups':
                    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th align="left"><span class="emphasis"><em>键：</em></span></th><th align="left"><span class="emphasis"><em>值：</em></span></th></tr></thead><tbody><tr><td align="left">书箱</td><td align="left">标题, 作者, ISBN</td></tr><tr><td align="left">一般</td><td align="left">状态</td></tr><tr><td align="left">订单</td><td align="left">价格, 供应商, 交货日期</td></tr><tr><td align="left">运输</td><td align="left">收货日期</td></tr></tbody></table></div></li><li class="listitem"><p>
                        'Ticket::Frontend::AgentTicketZoom###ProcessWidgetDynamicField':
                    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th align="left"><span class="emphasis"><em>键：</em></span></th><th align="left"><span class="emphasis"><em>值：</em></span></th></tr></thead><tbody><tr><td align="left">作者</td><td align="left">1</td></tr><tr><td align="left">收货日期</td><td align="left">1</td></tr><tr><td align="left">交货日期</td><td align="left">1</td></tr><tr><td align="left">ISBN</td><td align="left">1</td></tr><tr><td align="left">价格</td><td align="left">1</td></tr><tr><td align="left">状态</td><td align="left">1</td></tr><tr><td align="left">供应商</td><td align="left">1</td></tr><tr><td align="left">标题</td><td align="left">1</td></tr></tbody></table></div></li></ul></div><p>
        </p><p>
             现在我们可以开始真正的流程管理配置了。下一步，我们将定义所需的独立实体。
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.4.15"></a>流程(作为容器)</h4></div></div></div><p>
                创建一个新流程，需要点击管理员面板中系统管理的"Process Management
流程管理"，我们会进入流程管理概览窗口。在创建流程后，我们就可以创建其他全部实体(或流程组件)。
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                    一个流程中所定义的Activitiy(活动)、Activity Dialog(活动对话框)、Transition(转换) 与 Transition
Action(转换操作)，都可以被系统中的所有流程使用。
                </p></div><p>
                </p><div class="figure"><a name="id-1.7.3.4.15.4.1"></a><p class="title"><b>Figure 5.7. OTRS系统管理窗口 - 系统管理</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-admin-sysadmin.png" alt="OTRS系统管理窗口 - 系统管理"></div></div></div></div><p><br class="figure-break">
            </p><p>
                点击左侧操作框的“创建新的流程”按钮。
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.15.6.1"></a><p class="title"><b>Figure 5.8. 创建新的流程按钮</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-newprocess-button.png" alt="创建新的流程按钮"></div></div></div></div><p><br class="figure-break">
            </p><p>
                填写流程信息、设置流程名与描述，我们在完成所有配置任务之前，我们先把流程状态设为“非活动”。
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.15.8.1"></a><p class="title"><b>Figure 5.9. 添加新流程</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-newprocess-info.png" alt="添加新流程"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.4.16"></a>活动对话框</h4></div></div></div><p>
                    在流程管理概览窗口点击新建的流程名称，然后在“可用的流程元素”中点击“活动对话框”（点击会展开活动对话框选项，并收起其它具有可折叠效果的选项），再点击“创建新的活动对话框”。
                </p><p>
                    </p><div class="figure"><a name="id-1.7.3.4.16.3.1"></a><p class="title"><b>Figure 5.10. 创建新的活动对话框按钮</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-accordion-new-activitydialog.png" alt="创建新的活动对话框按钮"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    在打开的弹出窗口中填写“活动对话框名称”和“描述（简短）”相同内容，本例中我们将其它字段都保持默认值，要给活动对话框分配字段，仅需从“可用的字段”池中拖动必填字段，并放到“分配的字段”池中即可。“分配的字段”池中的字段顺序为将字段放进去的先后顺序，可通过拖放操作进行字段重新排序。
                </p><p>
                    </p><div class="figure"><a name="id-1.7.3.4.16.5.1"></a><p class="title"><b>Figure 5.11. 添加新的活动对话框</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-edit-activitydialog.png" alt="添加新的活动对话框"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    将选择的字段拖入"分配的字段"池后，会弹出另一个窗口，显示该字段详细信息，保留默认选项即可，接着将信件字段的信件类型(ArticleType)字段设置为
"备注-内部"。
                </p><p>
                    </p><div class="figure"><a name="id-1.7.3.4.16.7.1"></a><p class="title"><b>Figure 5.12. 编辑字段详细信息(信件)</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-edit-field-article.png" alt="编辑字段详细信息(信件)"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    在所有字段都分配好之后，点击主弹出窗口的提交按钮，保存修改记录。
                </p><p>
                    本例中，我们将使用信件字段来记录备注，但是可以用另外一个选项创建一个多行文本类型的动态字段，在下面的行中上述剩余的字段是我们之前定义好的动态字段。
                </p><p>
                    请注意本窗口中的所有动态字段都有“DynamicField_”前缀如“DynamicField_Title”，不要与工单标题的字段“Title标题”搞混淆了，
                </p><p>
                    创建如下活动对话框：
                </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>"记录需求" (AD1)</p><p>
                            此活动对话框包含了订单所需的所有数据字段(标题、作者与ISBN号)，以及一个标识审批状态的字段“审批”。
                        </p></li><li class="listitem"><p>“审批拒绝” (AD2)</p><p>
                            此活动对话框拥有一个用于注释的字段 (信件)与一个选择“审批拒绝”状态的字段“审批拒绝”。
                        </p></li><li class="listitem"><p>“通过审批” (AD3)</p><p>
                            只需要一个状态字段，选项为“通过审批”。
                        </p></li><li class="listitem"><p>“采购拒绝” (AD4)</p><p>
                            此活动对话框设计来拒绝一笔无效的采购单(书籍缺货)。这里同样需要一个注释字段与一个状态字段选项“采购拒绝”。
                        </p></li><li class="listitem"><p>“生成订单” (AD5)</p><p>
                            活动对话框中包含了采购涉及的供应商、价格与发货日期字段以及状态字段选项 “生成订单”。
                        </p></li><li class="listitem"><p>“货品收到” (AD6)</p><p>
                            此活动需要为收发室添加一个收到日期的字段，还需要一个状态字段选项“货品收到”。
                        </p></li></ul></div><p>
                </p><p>
                    为了限制每个活动对话框的状态字段值，我们需要在<code class="filename">Kernel/Config.pm</code>或一个新的Perl文件<code class="filename">Kernel/Config/Files</code>中添加一些ACL。
                </p><p>
                    </p><pre class="screen">
    $Self-&gt;{TicketAcl}-&gt;{'P1-AD1-1'} = {
        Properties =&gt; {
            Process =&gt; {
                ActivityDialogEntityID =&gt; ['AD1'],
            },
        },
        Possible =&gt; {
            Ticket =&gt; {
                DynamicField_Status =&gt; ['Approval'],
            },
        },
    };

    $Self-&gt;{TicketAcl}-&gt;{'P1-AD2-1'} = {
        Properties =&gt; {
            Process =&gt; {
                ActivityDialogEntityID =&gt; ['AD2'],
            },
        },
        Possible =&gt; {
            Ticket =&gt; {
                DynamicField_Status =&gt; ['Approval denied'],
            },
        },
    };

    $Self-&gt;{TicketAcl}-&gt;{'P1-AD3-1'} = {
        Properties =&gt; {
            Process =&gt; {
                ActivityDialogEntityID =&gt; ['AD3'],
            },
        },
        Possible =&gt; {
            Ticket =&gt; {
                DynamicField_Status =&gt; ['Approved'],
            },
        },
    };

    $Self-&gt;{TicketAcl}-&gt;{'P1-AD4-1'} = {
        Properties =&gt; {
            Process =&gt; {
                ActivityDialogEntityID =&gt; ['AD4'],
            },
        },
        Possible =&gt; {
            Ticket =&gt; {
                DynamicField_Status =&gt; ['Order denied'],
            },
        },
    };

    $Self-&gt;{TicketAcl}-&gt;{'P1-AD5-1'} = {
        Properties =&gt; {
            Process =&gt; {
                ActivityDialogEntityID =&gt; ['AD5'],
            },
        },
        Possible =&gt; {
            Ticket =&gt; {
                DynamicField_Status =&gt; ['Order placed'],
            },
        },
    };

    $Self-&gt;{TicketAcl}-&gt;{'P1-AD6-1'} = {
        Properties =&gt; {
            Process =&gt; {
                ActivityDialogEntityID =&gt; ['AD6'],
            },
        },
        Possible =&gt; {
            Ticket =&gt; {
                DynamicField_Status =&gt; ['Shipment received'],
            },
        },
    };
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.4.17"></a>转换</h4></div></div></div><p>
                    在“可用的流程元素”中点击“转换”, 接着点击“创建新的转换”。
                </p><p>
                    </p><div class="figure"><a name="id-1.7.3.4.17.3.1"></a><p class="title"><b>Figure 5.13. 创建新的转换按钮</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-accordion-new-transition.png" alt="创建新的转换按钮"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    在弹出窗口填写“转换名称”，接着我们需要配置条件选项，本例中只需要设置一个条件和一个字段，可以设置链接类型为“与”以及字段匹配类型值为“字符串”。
                </p><p>
                    </p><div class="figure"><a name="id-1.7.3.4.17.5.1"></a><p class="title"><b>Figure 5.14. 创建新转换</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-edit-transition.png" alt="创建新转换"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    所有条件设置好后，点击提交按钮，保存结果。
                </p><p>
                    创建如下转换：
                </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>“审批” (T1)</p><p>
                            用于检查状态字段是否被设置为“审批”的转换。
                        </p></li><li class="listitem"><p>“审批拒绝” (T2)</p><p>
                            用于检查状态字段是否被设置为“审批拒绝”的转换。
                        </p></li><li class="listitem"><p>“通过审批” (T3)</p><p>
                            用于检查状态字段是否被设置为“通过审批”的转换。
                        </p></li><li class="listitem"><p>“采购拒绝” (T4)</p><p>
                            用于检查状态字段是否被设置为“采购拒绝”的转换。
                        </p></li><li class="listitem"><p>“生成订单” (T5)</p><p>
                            用于检查状态字段是否被设置为“生成订单”的转换。
                        </p></li><li class="listitem"><p>“货品收到” (T6)</p><p>
                            用于检查状态字段是否被设置为“货品收到”的转换。
                        </p></li></ul></div><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.4.18"></a>转换操作</h4></div></div></div><p>
                    点击“可用的流程元素”中的“转换操作”，接着点击“创建新的转换操作”。
                </p><p>
                    </p><div class="figure"><a name="id-1.7.3.4.18.3.1"></a><p class="title"><b>Figure 5.15. 创建新的转换操作按钮</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-accordion-new-transitionaction.png" alt="创建新的转换操作按钮"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    在弹出窗口填写“转换操作名称”和“转换操作模块”，然后添加必填的和可选的参数名和参数值。
                </p><p>
                    所有的转换操作模块位于文件<code class="filename">Kernel/System/ProcessManagement/TransitionAction</code>中，下面是本版本中捆绑的转换操作清单：
                </p><p>
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>DynamicFieldSet动态字段设置</p></li><li class="listitem"><p>TicketArticleCreate工单信件创建</p></li><li class="listitem"><p>工单创建</p></li><li class="listitem"><p>TicketCustomerSet工单客户设置</p></li><li class="listitem"><p>TicketLockSet工单锁定设置</p></li><li class="listitem"><p>TicketOwnerSet工单所有者设置</p></li><li class="listitem"><p>TicketQueueSet工单队列设置</p></li><li class="listitem"><p>TicketResponsibleSet工单负责人设置</p></li><li class="listitem"><p>TicketServiceSet工单服务设置</p></li><li class="listitem"><p>TicketSLASet工单SLA设置</p></li><li class="listitem"><p>TicketStateSet工单状态设置</p></li><li class="listitem"><p>TicketTitleSet工单标题设置</p></li><li class="listitem"><p>TicketTypeSet工单类型设置</p></li></ul></div><p>
                </p><p>
                    每个模块都拥有其独立与不同的参数。请查阅<a class="link" href="process-management.html#available-transition-actions" title="可用的转换操作">module
documentation 模块文档</a>来了解所有必填与可选参数。
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                        从OTRS 4.0.1开始，参数不再强制使用固定值，而是通过格式&lt;OTRS_Ticket_property&gt;从原始工单继承。
                    </p><p>
                        从OTRS 4.0.6开始支持格式&lt;OTRS_TICKET_property&gt;，老格式仍然可以使用，但是会在将来的版本中废弃。
                    </p></div><p>
                    </p><div class="figure"><a name="id-1.7.3.4.18.9.1"></a><p class="title"><b>Figure 5.16. 创建新的转换操作</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-edit-transitionaction.png" alt="创建新的转换操作"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    当所有参数与数值都配置好后，点击提交按钮保存变更。
                </p><p>
                    新建如下转换操作：
                </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>“将工单移入‘管理’队列” (TA1)</p><p>
                            此动作预计在转换“审批” (T1)应用后执行。
                        </p></li><li class="listitem"><p>“变更工单负责人为‘经理’ ” (TA2)</p><p>
                            此动作在转换“审批” (T1)应用后执行。
                        </p></li><li class="listitem"><p>“移动流程工单到‘员工’队列” (TA3)</p><p>当遇到如下情况时执行：</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                应用了转换“审批拒绝” (T2)
                            </p></li><li class="listitem"><p>
                                应用了转换 “采购拒绝” (T4)
                            </p></li><li class="listitem"><p>
                                应用了转换 “货品收到” (T6)
                            </p></li></ul></div></li><li class="listitem"><p>“变更工单负责人为‘员工’” (TA4)</p><p>当遇到如下情况时执行：</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                应用了转换“审批拒绝” (T2)
                            </p></li><li class="listitem"><p>
                                应用了转换 “采购拒绝” (T4)
                            </p></li><li class="listitem"><p>
                                应用了转换 “货品收到” (T6)
                            </p></li></ul></div></li><li class="listitem"><p>“将工单转入‘采购’队列” (TA5)</p><p>当应用了转换 “通过审批” (T3)时执行。</p></li><li class="listitem"><p>“移动工单至‘邮局’队列” (TA6)</p><p>当应用了“生成订单” (T5)时执行。</p></li><li class="listitem"><p>“工单成功关闭” (TA7)</p><p>当遇到如下情况时执行：</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                应用了转换“货品收到” (T6)
                            </p></li></ul></div></li><li class="listitem"><p>“工单失败关闭” (TA8)</p><p>当遇到如下情况时执行：</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                应用了转换“审批拒绝” (T2)
                            </p></li><li class="listitem"><p>
                                应用了转换 “采购拒绝” (T4)
                            </p></li></ul></div></li></ul></div><p>
                </p><p>
                    正如你所见，相同的转换操作会在很多地方被执行。因此设计允许转换操作与转换自由连接，是为了更好的复用资源。
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.4.19"></a>活动</h4></div></div></div><p>
                我们选择将活动(Activities)看作一个篮子，这个篮子可以包含一个或多个活动对话框(Activity Dialogs)。
            </p><p>
                点击“可用的流程元素”中的“活动”，接着点击“创建新活动”。
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.19.4.1"></a><p class="title"><b>Figure 5.17. 创建新活动按钮</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-accordion-new-activity.png" alt="创建新活动按钮"></div></div></div></div><p><br class="figure-break">
            </p><p>
                在打开的弹出窗口中填写“活动名称”，然后仅需从“可用的活动对话框”池中拖动需要的活动对话框，并放到“分配的活动对话框”池中即可。这些对话框会在工单详情窗口按本窗口定义的从上到下、从左到右的顺序显示出来。
            </p><p>
                在第一个活动中这个顺序特别重要，因为流程开始后唯一显示的就是这个活动的第一个活动对话框。
            </p><p>
                创建下列活动：
            </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>“记录需求” (A1)</p><p>包含活动对话框“记录需求” (AD1)</p></li><li class="listitem"><p>“审批” (A2)</p><p>
                            包含活动对话框“审批拒绝” (AD2)和“通过审批” (AD3)
                        </p></li><li class="listitem"><p>“订单” (A3)</p><p>
                            包含活动对话框“采购拒绝” (AD4)与“生成订单” (AD5)
                        </p></li><li class="listitem"><p>“即将到达” (A4)</p><p>包含活动对话框“货品收到” (AD6)</p></li><li class="listitem"><p>“流程结束” (A5): 这是一个没有活动对话框的活动。它需要被设置在“审批拒绝”、“采购拒绝”或者“货品收到”之后，代表流程结束。
                        </p></li></ul></div><p>
            </p><p>
                现在我们可以清晰地看到，活动是一个流程工单精确定义的状态。在转换成功后，流程工单会从一个活动移动到另外一个。
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.4.20"></a>书籍采购流程路径</h4></div></div></div><p>
                让我们用拼图所缺失的最后一块来结束我们的示例-将流程作为流记录器。在我们的例子中，就是完整的订购工作流。其他流程可能还有办公用品订购或其他完全不同的流程。
            </p><p>
                此流程有一个起始点，它包括了初始活动和初始活动对话框。对于任何新书采购，初始活动对话框(第一个活动的第一个活动对话框)是最先显示的。如果这个活动完成并保存，流程工单将被创建并可以根据配置好的工作流进行处理。
            </p><p>
                流程中还包含了流程工单在流程中如何移动的方向。我们称之为“路径”。它由初始活动、一个或多个转换(可能包含转换操作)、以及其他活动组成。
            </p><p>
                假设该活动已经指派了相关的活动对话框，将其从折叠区域(屏幕的左侧部分)拖放到画布区域(在流程信息下面)。请注意，流程起始(绿色圆圈)会自动放置一个到该活动的箭头。(这是第一个活动，并且其第一个活动对话框会在流程开始后在窗口第一个显示)。
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.20.6.1"></a><p class="title"><b>Figure 5.18. 将第一个活动拖放到画布中</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-canvas-drag-activity.png" alt="将第一个活动拖放到画布中"></div></div></div></div><p><br class="figure-break">
            </p><p>
                下一步，将另一个活动也拖放到画布中。现在画布中我们有了两个活动。第一个活动连接到起始点，第二个活动还没有连接。你可以将鼠标移动到活动上，会显示它们自己的活动对话框。
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.20.8.1"></a><p class="title"><b>Figure 5.19. 拖动第二个活动到画布中</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-canvas-drag-activity2.png" alt="拖动第二个活动到画布中"></div></div></div></div><p><br class="figure-break">
            </p><p>
                接下来让我们在这两个活动间创建“路径”（连接），创建路径需要使用转换。在折叠区域点击“转换”并拖动一个转换到第一个活动里面放下。注意活动变化了颜色，表示附上了转换。转换一放下，转换箭头的终点就放置在邻近流程的起始点位置。拖动转换的箭头终点到另一活动里面来创建这两个活动的连接。
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.20.10.1"></a><p class="title"><b>Figure 5.20. 拖放一个转换到画布上</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-canvas-drag-transition.png" alt="拖放一个转换到画布上"></div></div></div></div><p><br class="figure-break">
            </p><p>
                现在操作之间的“路径”已经定义好了，接下来我们需要分配转换操作到这个转换上，在画布中双击转换标签，这会弹出新窗口。
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.20.12.1"></a><p class="title"><b>Figure 5.21. 使用转换连接活动</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-canvas-drag-transition2.png" alt="使用转换连接活动"></div></div></div></div><p><br class="figure-break">
            </p><p>
                从‘可用的转换操作’池中拖动所需的转换活动，并将其放置在‘分配的转换操作’池中，点击提交按钮。
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.20.14.1"></a><p class="title"><b>Figure 5.22. 分配转换操作</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-edit-path.png" alt="分配转换操作"></div></div></div></div><p><br class="figure-break">
            </p><p>
                接着回到流程编辑主窗口，点击画布下的保存按钮，保存所有其他的修改。
            </p><p>
                添加下列活动、转换和转换操作以完成“路径”：
            </p><p>记录需求直到“批准”</p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>起始点：活动“记录需求” (A1)</p></li><li class="listitem"><p>可能的转换：“审批” (T1)</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                    如果这个活动的条件满足，该工单将移动到活动“审批” (A2)
                                </p></li><li class="listitem"><p>
                                    此外，还会执行下列的转换操作：
                                </p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                                            “将工单移入‘管理’队列” (TA1)
                                        </p></li><li class="listitem"><p>“变更工单负责人为‘经理’ ” (TA2)</p></li></ul></div></li></ul></div></li></ul></div><p>
            </p><p>
                活动：“记录需求” (A1)是流程工单预定义步骤，以确认转换：“审批” (T1)的可能性。如果适用，工单将移动到下一个活动：“审批”
(A2)，并且执行转换操作“移动到‘管理’队列” (TA1)和“变更工单负责人为‘经理’ (TA2)。在活动“审批” (A2)中，活动对话框“审批拒绝”
(AD2) 和“通过审批” (AD3) 可用。
            </p><p>审批</p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>起始点：活动“审批” (A2)</p></li><li class="listitem"><p>可能的转换：</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>“审批拒绝” (T2)</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                                            如果匹配这个，流程工单就移动到活动“流程结束” (A5)。
                                        </p></li><li class="listitem"><p>
                                            此外，还会执行下列的转换操作：
                                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                “移动流程工单到‘员工’队列” (TA3)
                                            </p></li><li class="listitem"><p>
                                                “变更工单负责人为‘员工’” (TA4)
                                             </p></li><li class="listitem"><p>
                                                “工单失败关闭” (TA8)
                                             </p></li></ul></div></li></ul></div></li><li class="listitem"><p>“通过审批” (T3)</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                                            如果匹配这个，流程工单就移动到活动“订购” (A3)。
                                        </p></li><li class="listitem"><p>
                                                此外，还会执行下面的转换操作：：
                                            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                    “将工单转入‘采购’队列” (TA5)
                                                </p></li></ul></div></li></ul></div></li></ul></div></li></ul></div><p>
            </p><p>
                我们可以看到，定义流程工单的当前活动有一个或多个转换的可能性，转换有一个目标活动（和可能的一个或多个转换操作）。
            </p><p>订单</p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>起始点：活动“订购” (A3)</p></li><li class="listitem"><p>可能的转换：</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>“采购拒绝” (T4)</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                                            如果匹配这个，流程工单就移动到活动“流程结束” (A5)。
                                        </p></li><li class="listitem"><p>
                                            此外，还会执行下列的转换操作：
                                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                “移动流程工单到‘员工’队列” (TA3)
                                            </p></li><li class="listitem"><p>
                                                “设置工单负责人为‘员工’” (TA4)
                                             </p></li><li class="listitem"><p>
                                                “工单失败关闭” (TA8)
                                             </p></li></ul></div></li></ul></div></li><li class="listitem"><p>“生成订单” (T5)</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                                            如果匹配这个，流程工单就移动到活动“即将到达”
                                        </p></li><li class="listitem"><p>
                                                此外，还会执行下面的转换操作：：
                                            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                    “移动工单至‘邮局’队列” (TA6)
                                                </p></li></ul></div></li></ul></div></li></ul></div></li></ul></div><p>
            </p><p>即将到达</p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>起始点：活动“即将到达” (A4)</p></li><li class="listitem"><p>可能的转换：</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>“货品收到” (T6)</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                                            如果匹配这个，流程工单就移动到活动“流程结束” (A5)。
                                        </p></li><li class="listitem"><p>
                                            此外，还会执行下列的转换操作：
                                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                “移动流程工单到‘员工’队列” (TA3)
                                            </p></li><li class="listitem"><p>
                                                “设置工单负责人为‘员工’” (TA4)
                                             </p></li><li class="listitem"><p>
                                                “工单成功关闭” (TA7)
                                             </p></li></ul></div></li></ul></div></li></ul></div></li></ul></div><p>
            </p><p>
                书籍采购流程完整路径看上去就像这样：
            </p><p>
                </p><div class="figure"><a name="id-1.7.3.4.20.28.1"></a><p class="title"><b>Figure 5.23. 书籍采购完整的流程路径</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/customization/pm-edit-process.png" alt="书籍采购完整的流程路径"></div></div></div></div><p><br class="figure-break">
            </p><p>
                在完成流程路径后，请点击画布正文的“保存”按钮，然后再点击“同步所有流程”按钮。这将收集所有的流程信息到数据库并创建一个缓存文件（用Perl语言）。这个缓存文件就是实际的流程配置，系统将用它来创建或处理流程工单。
            </p><p>
                任何流程变更(通过GUI界面)都需要重新同步缓存文件，才可以确保将变更映射到系统。
            </p><p>
                也可以从一个YAML文件导入整个流程，但是在导入前，仍然需要创建每个流程需要的所有动态字段、用户、队列等等。
            </p><p>
                注意：如果流程需要使用ACL，这些ACL也需要手动设置好。
            </p><p>
                下面是书籍采购流程示例的完整YAML文件内容：
            </p><p>
                </p><pre class="screen">
---
Activities:
  A1:
    ActivityDialogs:
      - AD1
    ChangeTime: 2012-11-23 14:49:22
    Config:
      ActivityDialog:
        1: AD1
    CreateTime: 2012-11-23 11:49:38
    EntityID: A1
    ID: 151
    Name: 记录需求
  A2:
    ActivityDialogs:
      - AD2
      - AD3
    ChangeTime: 2012-12-13 00:55:12
    Config:
      ActivityDialog:
        1: AD2
        2: AD3
    CreateTime: 2012-11-23 11:50:11
    EntityID: A2
    ID: 152
    Name: 审批
  A3:
    ActivityDialogs:
      - AD4
      - AD5
    ChangeTime: 2012-11-23 18:12:14
    Config:
      ActivityDialog:
        1: AD4
        2: AD5
    CreateTime: 2012-11-23 11:50:35
    EntityID: A3
    ID: 153
    Name: 采购
  A4:
    ActivityDialogs:
      - AD6
    ChangeTime: 2012-11-23 18:12:35
    Config:
      ActivityDialog:
        1: AD6
    CreateTime: 2012-11-23 11:51:00
    EntityID: A4
    ID: 154
    Name: 即将到达
  A5:
    ActivityDialogs: []
    ChangeTime: 2012-11-23 11:51:33
    Config: {}
    CreateTime: 2012-11-23 11:51:33
    EntityID: A5
    ID: 155
    Name: 流程结束
ActivityDialogs:
  AD1:
    ChangeTime: 2012-12-06 02:16:21
    Config:
      DescriptionLong: ''
      DescriptionShort: 记录需求
      FieldOrder:
        - DynamicField_Author
        - DynamicField_ISBN
        - DynamicField_Title
        - DynamicField_Status
      Fields:
        DynamicField_Author:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_ISBN:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_Status:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_Title:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
      Interface:
        - AgentInterface
      Permission: ''
      RequiredLock: 0
      SubmitAdviceText: ''
      SubmitButtonText: ''
    CreateTime: 2012-11-23 14:34:43
    EntityID: AD1
    ID: 154
    Name: 记录需求
  AD2:
    ChangeTime: 2012-11-23 14:57:41
    Config:
      DescriptionLong: ''
      DescriptionShort: 审批拒绝
      FieldOrder:
        - Article
        - DynamicField_Status
      Fields:
        Article:
          Config:
            ArticleType: note-internal
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_Status:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
      Interface:
        - AgentInterface
      Permission: ''
      RequiredLock: 0
      SubmitAdviceText: ''
      SubmitButtonText: 拒绝请求
    CreateTime: 2012-11-23 14:36:39
    EntityID: AD2
    ID: 155
    Name: Approval denied
  AD3:
    ChangeTime: 2012-12-14 03:14:23
    Config:
      DescriptionLong: ''
      DescriptionShort: 通过审批
      FieldOrder:
        - DynamicField_Status
      Fields:
        DynamicField_Status:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
      Interface:
        - AgentInterface
      Permission: ''
      RequiredLock: 0
      SubmitAdviceText: ''
      SubmitButtonText: 同意请求
    CreateTime: 2012-11-23 14:37:35
    EntityID: AD3
    ID: 156
    Name: 通过审批
  AD4:
    ChangeTime: 2012-11-23 14:58:52
    Config:
      DescriptionLong: ''
      DescriptionShort: 采购拒绝
      FieldOrder:
        - Article
        - DynamicField_Status
      Fields:
        Article:
          Config:
            ArticleType: note-internal
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_Status:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
      Interface:
        - AgentInterface
      Permission: ''
      RequiredLock: 0
      SubmitAdviceText: ''
      SubmitButtonText: 拒绝采购
    CreateTime: 2012-11-23 14:38:48
    EntityID: AD4
    ID: 157
    Name: 采购拒绝
  AD5:
    ChangeTime: 2012-12-06 02:20:12
    Config:
      DescriptionLong: ''
      DescriptionShort: 生成订单
      FieldOrder:
        - DynamicField_DeliveryDate
        - DynamicField_Price
        - DynamicField_Supplier
        - DynamicField_Status
      Fields:
        DynamicField_DeliveryDate:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_Price:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_Status:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_Supplier:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
      Interface:
        - AgentInterface
      Permission: ''
      RequiredLock: 0
      SubmitAdviceText: ''
      SubmitButtonText: Place Order
    CreateTime: 2012-11-23 14:41:28
    EntityID: AD5
    ID: 158
    Name: 生成订单
  AD6:
    ChangeTime: 2012-11-23 14:42:43
    Config:
      DescriptionLong: ''
      DescriptionShort: 货品到达
      FieldOrder:
        - DynamicField_DateOfReceipt
        - DynamicField_Status
      Fields:
        DynamicField_DateOfReceipt:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
        DynamicField_Status:
          DefaultValue: ''
          DescriptionLong: ''
          DescriptionShort: ''
          Display: 1
      Interface:
        - AgentInterface
      Permission: ''
      RequiredLock: 0
      SubmitAdviceText: ''
      SubmitButtonText: ''
    CreateTime: 2012-11-23 14:42:43
    EntityID: AD6
    ID: 159
    Name: 货品到达
Process:
  Activities:
    - A1
    - A2
    - A3
    - A4
    - A5
  ChangeTime: 2012-12-06 02:31:59
  Config:
    Description: 采购一本书的流程
    Path:
      A1:
        T1:
          ActivityEntityID: A2
          TransitionAction:
            - TA2
            - TA1
      A2:
        T2:
          ActivityEntityID: A5
          TransitionAction:
            - TA3
            - TA4
            - TA8
        T3:
          ActivityEntityID: A3
          TransitionAction:
            - TA5
      A3:
        T4:
          ActivityEntityID: A5
          TransitionAction:
            - TA3
            - TA4
            - TA8
        T5:
          ActivityEntityID: A4
          TransitionAction:
            - TA6
      A4:
        T6:
          ActivityEntityID: A5
          TransitionAction:
            - TA3
            - TA4
            - TA7
      A5: {}
    StartActivity: A1
    StartActivityDialog: AD1
  CreateTime: 2012-11-23 11:45:12
  EntityID: P1
  ID: 94
  Layout:
    A1:
      left: 172
      top: 63
    A2:
      left: 402
      top: 156
    A3:
      left: 649
      top: 255
    A4:
      left: 774
      top: 391
    A5:
      left: 194
      top: 410
  Name: 书籍采购
  State: Active
  StateEntityID: S1
  TransitionActions:
    - TA1
    - TA2
    - TA3
    - TA4
    - TA8
    - TA5
    - TA3
    - TA4
    - TA8
    - TA6
    - TA3
    - TA4
    - TA7
  Transitions:
    - T1
    - T2
    - T3
    - T4
    - T5
    - T6
TransitionActions:
  TA1:
    ChangeTime: 2012-11-23 16:01:37
    Config:
      Config:
        Queue: Management
      Module: Kernel::System::ProcessManagement::TransitionAction::TicketQueueSet
    CreateTime: 2012-11-23 15:50:59
    EntityID: TA1
    ID: 61
    Name: 将工单转入‘管理’队列”
  TA2:
    ChangeTime: 2012-11-23 16:02:12
    Config:
      Config:
        Responsible: 经理
      Module: Kernel::System::ProcessManagement::TransitionAction::TicketResponsibleSet
    CreateTime: 2012-11-23 15:58:22
    EntityID: TA2
    ID: 62
    Name: 变更工单负责人为‘经理’
  TA3:
    ChangeTime: 2012-11-24 14:27:02
    Config:
      Config:
        Queue: 员工
      Module: Kernel::System::ProcessManagement::TransitionAction::TicketQueueSet
    CreateTime: 2012-11-23 16:02:54
    EntityID: TA3
    ID: 63
    Name: 将工单转入‘经理’队列”
  TA4:
    ChangeTime: 2012-11-23 16:04:06
    Config:
      Config:
        Responsible: 员工
      Module: Kernel::System::ProcessManagement::TransitionAction::TicketResponsibleSet
    CreateTime: 2012-11-23 16:04:06
    EntityID: TA4
    ID: 64
    Name: 变更工单负责人为‘员工’
  TA5:
    ChangeTime: 2012-12-06 02:18:34
    Config:
      Config:
        Queue: 采购
      Module: Kernel::System::ProcessManagement::TransitionAction::TicketQueueSet
    CreateTime: 2012-11-23 16:04:54
    EntityID: TA5
    ID: 65
    Name: 将工单转入‘采购’队列”
  TA6:
    ChangeTime: 2012-12-06 02:18:48
    Config:
      Config:
        Queue: 邮局
      Module: Kernel::System::ProcessManagement::TransitionAction::TicketQueueSet
    CreateTime: 2012-11-23 16:06:20
    EntityID: TA6
    ID: 66
    Name: 将工单转入‘邮局’队列”
  TA7:
    ChangeTime: 2012-12-06 02:29:55
    Config:
      Config:
        State: 成功关闭
      Module: Kernel::System::ProcessManagement::TransitionAction::TicketStateSet
    CreateTime: 2012-12-06 02:29:27
    EntityID: TA7
    ID: 67
    Name: Close ticket successfully
  TA8:
    ChangeTime: 2012-12-06 02:31:12
    Config:
      Config:
        State: closed unsuccessful
      Module: Kernel::System::ProcessManagement::TransitionAction::TicketStateSet
    CreateTime: 2012-12-06 02:31:12
    EntityID: TA8
    ID: 68
    Name: 工单失败关闭
Transitions:
  T1:
    ChangeTime: 2012-11-23 15:12:20
    Config:
      Condition:
        1:
          Fields:
            DynamicField_Status:
              Match: Approval
              Type: String
          Type: and
      ConditionLinking: and
    CreateTime: 2012-11-23 11:53:52
    EntityID: T1
    ID: 94
    Name: Approval
  T2:
    ChangeTime: 2012-11-23 15:12:50
    Config:
      Condition:
        1:
          Fields:
            DynamicField_Status:
              Match: Approval denied
              Type: String
          Type: and
      ConditionLinking: and
    CreateTime: 2012-11-23 11:54:26
    EntityID: T2
    ID: 95
    Name: Approval denied
  T3:
    ChangeTime: 2012-11-23 15:13:29
    Config:
      Condition:
        1:
          Fields:
            DynamicField_Status:
              Match: 通过审批
              Type: String
          Type: and
      ConditionLinking: and
    CreateTime: 2012-11-23 11:54:54
    EntityID: T3
    ID: 96
    Name: 通过审批
  T4:
    ChangeTime: 2012-11-23 15:14:08
    Config:
      Condition:
        1:
          Fields:
            DynamicField_Status:
              Match: 采购拒绝
              Type: String
          Type: and
      ConditionLinking: and
    CreateTime: 2012-11-23 11:55:25
    EntityID: T4
    ID: 97
    Name: Order denied
  T5:
    ChangeTime: 2012-11-23 18:30:33
    Config:
      Condition:
        1:
          Fields:
            DynamicField_Status:
              Match: 生成订单
              Type: String
          Type: and
      ConditionLinking: and
    CreateTime: 2012-11-23 11:56:15
    EntityID: T5
    ID: 98
    Name: 生成订单
  T6:
    ChangeTime: 2012-11-23 15:15:30
    Config:
      Condition:
        1:
          Fields:
            DynamicField_Status:
              Match: 货品到达
              Type: String
          Type: and
      ConditionLinking: and
    CreateTime: 2012-11-23 11:56:48
    EntityID: T6
    ID: 99
    Name: 货品到达

                </pre><p>
            </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.7.3.5"></a>流程配置参考</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.5.2"></a>流程</h4></div></div></div><p>
                一个流程就是工作流/流程的路径。路径上的路标可以是活动或转换（后面再讨论转换）。
            </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.3"></a>流程配置</h5></div></div></div><p>
                    流程配置可以放在文件<code class="filename">Kernel/Config.pm</code>中，但强烈推荐创建一个新文件如<code class="filename">Kernel/Config/Files/MyProcess.pm</code>。注意图形界面生成的文件为<code class="filename">Kernel/Config/File/ZZZProcessManagement</code>，请一定不要使用这个文件名，否则在同步流程时会被覆盖。让我们来看一个示例流程配置（从流程缓存文件）：
                </p><p>
                    </p><pre class="screen">
$Self-&gt;{'Process'} = {
    'P1' =&gt; {
        Name                =&gt; 'Book order',
        CreateTime          =&gt; '16-02-2012 13:37:00',
        CreateBy            =&gt; '1',
        ChangeTime          =&gt; '17-02-2012 13:37:00',
        ChangeBy            =&gt; '1',
        State               =&gt; 'Active',
        StartActivity       =&gt; 'A1',
        StartActivityDialog =&gt; 'AD1',
        Path =&gt; {
            'A1' =&gt; {
                'T1' =&gt; {
                    ActivityEntityID =&gt; 'A2',
                },
            },
            'A2' =&gt; {
                'T2' =&gt;  {
                    ActivityEntityID =&gt; 'A3',
                },
            },
        },
    },
    'P2' =&gt; {
        Name                =&gt; 'IT order',
        CreateTime          =&gt; '26-02-2012 13:37:00',
        CreateBy            =&gt; '1',
        ChangeTime          =&gt; '27-02-2012 13:37:00',
        ChangeBy            =&gt; '1',
        State               =&gt; 'Active',
        StartActivity       =&gt; 'A2',
        StartActivityDialog =&gt; 'AD2',
        Path =&gt; {
            'A2' =&gt; {
                'T3' =&gt; {
                    ActivityEntityID =&gt; 'A4',
                },
            },
        },
    }
};
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.4"></a>名称</h5></div></div></div><p>
                    流程的名称，服务人员在创建流程工单时可以选择的流程名。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.5"></a>创建时间</h5></div></div></div><p>
                    流程创建的时间。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.6"></a>创建人</h5></div></div></div><p>
                    创建流程的用户UID。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.7"></a>修改时间</h5></div></div></div><p>
                    流程被修改的时间。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.8"></a>修改人</h5></div></div></div><p>
                    最后修改流程的用户UID。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.9"></a>状态</h5></div></div></div><p>
                    定义的流程状态。可用值为：
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                ‘激活’-可以在新的流程工单中使用的所有流程。
                            </p></li><li class="listitem"><p>
                                ‘逐渐消失’-不能在新工单中使用，但是现有工单仍然在使用的流程。
                            </p></li><li class="listitem"><p>
                                ‘未激活’-流程没有激活，不能在新工单或现有工单中使用。
                            </p></li></ul></div><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.10"></a>起始活动</h5></div></div></div><p>
                    当创建一个新的流程工单时，必须定义一个‘起始活动’。一旦创建了工单，这个活动就被设置并作为第一个转换检查的基础。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.11"></a>起始活动对话框</h5></div></div></div><p>
                    对新的流程工单，必须定义一个‘起始活动对话框’。这将在创建一个流程工单时显示（在选定流程后）。在这个时间点，工单还不存在，工单会在‘起始活动对话框’提交之后创建。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.2.12"></a>路径</h5></div></div></div><p>
                    路径包含了当前流程的活动及活动间可能的转换。还有在转换时发生的转换操作。这个方式控制了流程工单发生的路径。例如：
                </p><p>
                    </p><pre class="screen">
'A1' =&gt; {
    'T1' =&gt; {
        ActivityEntityID =&gt; 'A2',
    },
    'T2' =&gt; {
        ActivityEntityID =&gt; 'A3',
    },
    'T3' =&gt; {
        ActivityEntityID =&gt; 'A4',
        TransitionAction =&gt; ['TA1', 'TA2'],
    },
},
                    </pre><p>
                </p><p>
                    如果一个流程工单在活动 'A1'，它有三个可能的路径来获得另一活动。在转换'T1'到'T3'，定义了流程工单必须满足移动（转换）到另一活动的条件。
                </p><p>
                    如果在这个案例中流程工单的所有值和转换'T2'所需的动态字段都是正确的，这个工单就会从活动'A1'移动到'A3'。在提交了一个活动对话框之后，或者工单有了其它任何修改，工单会从当前活动检查可能的转换。如果有多个可能的转换，就使用第一个（基于TransitionID的数字排序）。
                </p><p>
                    此外，还可以在路径配置中给转换分配转换操作。这些转换操作就是在成功转换后执行的模块。在示例流程中它们用数组表单方式分配，我们会在后面讨论这些细节。
                </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.5.3"></a>活动</h4></div></div></div><p>
                一个活动包含一个或多个活动对话框并模拟流程中的一个‘步骤’。当前活动的所有活动对话框都会在工单详情窗口中显示，直到一个转换条件满足后才能使用它们。
            </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.3.3"></a>活动配置</h5></div></div></div><p>
                让我们看一个活动配置样例：
            </p><p>
                </p><pre class="screen">
$Self-&gt;{'Process::Activity'} =
{
    'A1' =&gt; {
        Name       =&gt; 'Activity 1 optional',
        CreateTime =&gt; '16-02-2012 13:37:00',
        CreateBy   =&gt; '1',
        ChangeTime =&gt; '17-02-2012 13:37:00',
        ChangeBy   =&gt; '1',
        ActivityDialog =&gt; {
            1 =&gt; 'AD1',
        },
    },
    'A2' =&gt; {
        Name       =&gt; 'Activity 2 optional',
        CreateTime =&gt; '16-02-2012 13:37:00',
        CreateBy   =&gt; '1',
        ChangeTime =&gt; '17-02-2012 13:37:00',
        ChangeBy   =&gt; '1',
        ActivityDialog =&gt; {
            1 =&gt; 'AD5',
            2 =&gt; 'AD6',
            3 =&gt; 'AD1',
        },
    },
};
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.3.4"></a>名称</h5></div></div></div><p>
                    活动的名称。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.3.5"></a>创建时间</h5></div></div></div><p>
                    活动创建的时间。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.3.6"></a>创建人</h5></div></div></div><p>
                    创建该活动用户UID。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.3.7"></a>修改时间</h5></div></div></div><p>
                    最后修改的时间。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.3.8"></a>修改人</h5></div></div></div><p>
                    最后修改该流程的用户UID。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.3.9"></a>活动对话框</h5></div></div></div><p>
                    活动对话框包含了这个活动的可用活动对话框列表。当前活动的所有活动对话框都会显示在工单详情窗口中。它们显示的顺序在配置中设置，在这里'AD5'显示在'AD6'和'AD1'的前面。
                </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.5.4"></a>活动对话框</h4></div></div></div><p>
                一个活动对话框是一个特别的窗口，能在不同的活动中使用。
            </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.3"></a>活动对话框配置</h5></div></div></div><p>
                    让我们看一个活动配置样例：
                </p><p>
                    </p><pre class="screen">
$Self-&gt;{'Process::ActivityDialog'} = {
    'AD1' =&gt; {
        Name             =&gt; 'ActivityDialog 1 optional',
        DescriptionShort =&gt; 'Basic info',
        DescriptionLong  =&gt; 'Please insert the necessesary basic information for IT orders',
        CreateTime       =&gt; '28-02-2012 13:37:00',
        CreateBy         =&gt; '1',
        ChangeTime       =&gt; '29-02-2012 13:37:00',
        ChangeBy         =&gt; '1',
        Fields =&gt; {
            PriorityID =&gt; {
                DescriptionShort =&gt; 'Priority ID',
                DescriptionLong  =&gt; 'Enter the priority here',
                Display          =&gt; 2,
            },
        },
        FieldOrder       =&gt; [ 'PriorityID' ],
        SubmitAdviceText =&gt; 'Note: If you submit the form...',
        SubmitButtonText =&gt; 'Send request',
    },
    'AD2' =&gt; {
        Name             =&gt; 'ActivityDialog 2 optional',
        DescriptionShort =&gt; 'Basic info',
        DescriptionLong  =&gt; 'Please insert the necessesary basic information for Book orders',
        CreateTime       =&gt; '28-02-2012 13:37:00',
        CreateBy         =&gt; '1',
        ChangeTime       =&gt; '29-02-2012 13:37:00',
        ChangeBy         =&gt; '1',
        Fields =&gt; {
            StateID =&gt; {
                DescriptionShort =&gt; 'State ID',
                DescriptionLong  =&gt; 'Enter the state here',
                Display          =&gt; 2,
                DefaultValue     =&gt; '2',
            },
            Queue =&gt; {
                DescriptionShort =&gt; 'Queue ID',
                DescriptionLong  =&gt; 'Enter the queue here',
                Display          =&gt; 2,
                DefaultValue     =&gt; 'Raw',
            },
            Title =&gt; {
                DescriptionShort =&gt; 'Title',
                DescriptionLong  =&gt; 'Enter the title here',
                Display          =&gt; 1,
                DefaultValue     =&gt; 'Default Title',
            },
            DynamicField_Anzahl =&gt; {
                DescriptionShort =&gt; 'Amount',
                DescriptionLong  =&gt; 'Enter the amount here',
                Display          =&gt; 2,
                DefaultValue     =&gt; '4',
            },
        },
        FieldOrder       =&gt; [ 'DynamicField_Anzahl', 'StateID', 'Queue', 'Title' ],
        SubmitAdviceText =&gt; 'Note: If you submit the form...',
        SubmitButtonText =&gt; 'Send request',
    },
};
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.4"></a>名称</h5></div></div></div><p>
                    活动对话框名称
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.5"></a>创建时间</h5></div></div></div><p>
                    活动创建的时间。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.6"></a>创建人</h5></div></div></div><p>
                    创建该活动对话框的用户UID。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.7"></a>修改时间</h5></div></div></div><p>
                    最后修改的时间。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.8"></a>修改人</h5></div></div></div><p>
                    最后修改这个活动对话框的用户UID。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.9"></a>字段</h5></div></div></div><p>
                    包含所有能在活动对话框中显示的字段。目前能使用下列字段：
                </p><p>
                    </p><pre class="screen">
    Title
    State
    StateID
    Priority
    PriorityID
    Lock
    LockID
    Queue
    QueueID
    Customer
    CustomerID
    CustomerNo
    CustomerUserID
    Owner
    OwnerID
    Type
    TypeID
    SLA
    SLAID
    Service
    ServiceID
    Responsible
    ResponsibleID
    PendingTime
    DynamicField_$FieldName  # for all dynamic fields
                    </pre><p>
                </p><p>
                    单个字段配置的样例：
                </p><p>
                    </p><pre class="screen">
StateID =&gt; {
    DescriptionShort =&gt; 'State ID',
    DescriptionLong  =&gt; 'Enter the state here',
    Display          =&gt; 2,
    DefaultValue     =&gt; '2',
},
                    </pre><p>
                </p><p>
                    “信件”字段是一个特殊的例子。如果它出现在一个‘字段’配置中，活动对话框将包含一个完整的富文本编辑器，拥有主题字段并能处理附件。输入的文本会作为信件添加到工单并通过邮件发送。让我们看看信件字段配置的一个例子：
                </p><p>
                    </p><pre class="screen">
Article =&gt; {
    DescriptionShort =&gt; 'Please insert your comment here.',
    DescriptionLong =&gt; '',
    Display         =&gt; 1,
    Config          =&gt; {
        ArticleType  =&gt; 'note-internal',
        LabelSubject =&gt; '',
        LabelBody    =&gt; '',
    },
},
                    </pre><p>
                </p><p>
                    让我们看看这个字段的配置选项：
                </p><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.4.9.9"></a>简短描述</h6></div></div></div><p>
                        （可选）显示在字段标题下方的简短描述。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.4.9.10"></a>详细描述</h6></div></div></div><p>
                        （可选）鼠标移到到字段上时显示的详细描述信息，比如怎样填写这个字段的建议。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.4.9.11"></a>显示</h6></div></div></div><p>
                        控制这个字段是否显示和/或必填，可能的值有：
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    ‘0’：字段不可见。这在自动设置字段值时有用。这种情况下会保存配置的默认值。
                                </p></li><li class="listitem"><p>
                                    ‘1’：字段可见，但是可选的。
                                </p></li><li class="listitem"><p>
                                    ‘2’：字段可见，且是必填的。下列的字段只能为不可见或必填：
                                </p><p>
                                    </p><pre class="screen">
    QueueID
    Queue
    State
    StateID
    Lock
    LockID
    Priority
    PriorityID
    Type
    TypeID
                                    </pre><p>
                                </p></li></ul></div><p>
                    </p><p>
                        这个字段配置为可选的，并且用户没有提交值，当用户提交活动对话框时将使用默认值保存。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.4.9.12"></a>默认值</h6></div></div></div><p>
                        对于有‘ID’的字段（如QueueID、OwnerID），默认值是这个字段在数据库中的ID。对于其它没有‘ID’的字段（如队列、所有者），默认值必须包含这个字段自己的值。例如：
                    </p><p>
                        </p><pre class="screen">
Queue =&gt; {
    DescriptionShort =&gt; 'Queue',
    DescriptionLong  =&gt; 'Enter the queue here',
    Display          =&gt; 2,
    DefaultValue     =&gt; 'Raw',
},
                        </pre><p>
                    </p></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.10"></a>字段顺序</h5></div></div></div><p>
                    在这里配置字段显示的顺序。重要：不可见字段也必须在这里配置，因为只有配置了的字段才会考虑保存，没有配置的字段不会被保存。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.11"></a>提交建议文本</h5></div></div></div><p>
                    （可选）显示在提交按钮右上方的文本，提供附加的帮助或建议信息。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.4.12"></a>提交按钮文本</h5></div></div></div><p>
                    （可选）提交按钮的可定制文本。
                </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.5.5"></a>转换</h4></div></div></div><p>
                一个转换决定（基于配置的条件）使用流程中的哪一个路径，例如：一个流程工单移动到哪个活动对话框。
            </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.5.3"></a>转换配置</h5></div></div></div><p>
                    让我们看一个转换配置的样例：
                </p><p>
                    </p><pre class="screen">
$Self-&gt;{'Process::Transition'} = {
    'T1' =&gt; {
        Name =&gt; 'Transition 1',
        CreateTime =&gt; '14-03-2012 13:37:00', # optional
        CreateBy   =&gt; '1',                   # optional
        ChangeTime =&gt; '15-03-2012 13:37:00', # optional
        ChangeBy   =&gt; '15-03-2012 13:37:00', # optional
        Condition  =&gt; {
            Cond1  =&gt; {
                Fields =&gt; {
                    StateID =&gt; {
                        Type  =&gt; 'String',
                        Match =&gt; '1',
                    },
                },
            },
        },
    },
    'T2' =&gt; {
        Name       =&gt; 'Transition 2 optional',
        CreateTime =&gt; 'DATE',   # optional
        CreateBy   =&gt; 'USERID', # optional
        ChangeTime =&gt; 'DATE',   # optional
        ChangeBy =&gt; 'USERID',   # optional
        Condition =&gt; {
            Cond1 =&gt; {
                Queue               =&gt; 'Raw',
                DynamicField_Farbe  =&gt; '2',
                DynamicField_Anzahl =&gt; '1',
            },
        },
    },
};
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.5.4"></a>名称</h5></div></div></div><p>
                    转换的名称。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.5.5"></a>创建时间</h5></div></div></div><p>
                    创建转换的时间。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.5.6"></a>创建人</h5></div></div></div><p>
                    创建转换的用户UID。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.5.7"></a>修改时间</h5></div></div></div><p>
                    最后修改转换的时间。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.5.8"></a>修改人</h5></div></div></div><p>
                    最后修改转换的用户UID。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.5.9"></a>条件</h5></div></div></div><p>
                    包含这个转换生效所需的所有条件。例如：
                </p><p>
                    </p><pre class="screen">
Condition =&gt; {
    Type  =&gt; 'and',
    Cond1 =&gt; {
        Type   =&gt; 'and',
        Fields =&gt; {
            StateID =&gt; {
                Type  =&gt; 'String',
                Match =&gt; '1',
            },
            DynamicField_Marke =&gt; {
                Type  =&gt; 'String',
                Match =&gt; 'VW',
        },
    },
    Cond2 =&gt; {
        Type =&gt; 'and',
        Fields =&gt; {
            Queue =&gt; {
                Type  =&gt; 'String',
                Match =&gt; 'Raw',
            },
        },
    },
},
                    </pre><p>
                </p><p>
                    让我们看看这个条件配置的详细信息。
                </p><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.5.9.5"></a>类型（条件间）</h6></div></div></div><p>
                        指定不同的条件元素互相连接的方式，可能的值有：
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    ‘与’：这是默认类型。要使转换生效必须满足所有的条件。
                                </p></li><li class="listitem"><p>
                                    ‘或’：至少需要满足一个条件。
                                </p></li><li class="listitem"><p>
                                    ‘异或’：必须恰好满足一个条件，不能满足多个条件。
                                </p></li></ul></div><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.5.9.6"></a>Cond1</h6></div></div></div><p>
                        这是示例条件的名称。可以随便选择条件名称。条件按排好的顺序评估。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.5.9.7"></a>类型（条件内字段）</h6></div></div></div><p>
                        指定这个条件内单个字段的测试结果互相连接的方式，可能的值有：
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    ‘与’：这是默认类型。这个条件内的所有字段测试结果必须都匹配。
                                </p></li><li class="listitem"><p>
                                    ‘或’：至少需要匹配一个字段。
                                </p></li><li class="listitem"><p>
                                    ‘异或’：必须恰好匹配一个字段的测试结果，不能匹配多个。
                                </p></li></ul></div><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.5.9.8"></a>字段</h6></div></div></div><p>
                        指定要测试其值的特殊字段。在我们的例子中：
                    </p><p>
                        </p><pre class="screen">
Fields =&gt; {
    StateID =&gt; {
        Type  =&gt; 'String',
        Match =&gt; '1',
    },
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.5.9.9"></a>状态ID</h6></div></div></div><p>
                        字段名的例子。可以使用下列工单字段：
                    </p><p>
                        </p><pre class="screen">
    Title
    State
    StateID
    Priority
    PriorityID
    Lock
    LockID
    Queue
    QueueID
    Customer
    CustomerID
    CustomerNo
    CustomerUserID
    Owner
    OwnerID
    Type
    TypeID
    SLA
    SLAID
    Service
    ServiceID
    Responsible
    ResponsibleID
    DynamicField_$FieldName # for all DynamicFields
                        </pre><p>
                    </p><p>
                        当测试一个含有‘ID’（如SLAID）的字段时，这个字段的数据库ID将用于测试，而其它字段则使用实际值来测试。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.5.9.10"></a>类型</h6></div></div></div><p>
                        确定字段测试的类型，可能的值有：

                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    ‘String字符串’：比较字段值和在'Match'中指定的字符串，如果完全相同就是匹配的。
                                </p></li><li class="listitem"><p>
                                    'Hash哈希'：比较字段值的哈希值和在'Match'中指定的哈希值。所有的哈希值必须一致才是匹配的。
                                </p></li><li class="listitem"><p>
                                    'Array数组'：比较字段值的数组和在'Match'中指定的数组。两个数据的清单值必须一致才是匹配的。
                                </p></li><li class="listitem"><p>
                                    'Regex正则表达式'：使用一个正则表达式来测试字段值，重点注意的是'Match'包含<span class="emphasis"><em>qr{}xms</em></span>作为基本条件。实际的正则表达式是在大括号中间。
                                </p></li><li class="listitem"><p>
                                    'Module模块'：允许你使用一个Perl模块来进行条件检查。如果模块返回1，检查是匹配的。你可以在文件<code class="filename">Kernel/System/ProcessManagement/TransitionValidation/ValidateDemo.pm</code>中找到一个示例模块。
                                </p></li></ul></div><p>
                    </p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.7.3.5.6"></a>转换操作</h4></div></div></div><p>
                转换操作是成功应用转换后触发的操作（当一个流程工单从一个活动移动到另一活动时）。这些转换操作用来对工单执行不同的变更，如变更工单的队列或所有者，你还可以创建你自己的转换操作来执行其它的复杂变更。
            </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.6.3"></a>转换操作配置</h5></div></div></div><p>
                    让我们看一个转换配置的样例：
                </p><p>
                    </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Queue Move',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketQueueSet',
        Config =&gt; {
            Queue  =&gt; 'Junk',
            UserID =&gt; 123,
        },
    },
};
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.6.4"></a>名称</h5></div></div></div><p>
                    转换操作的名称。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.6.5"></a>模块</h5></div></div></div><p>
                    指定使用的Perl模块。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.6.6"></a>配置</h5></div></div></div><p>
                    这个参数包含模块所需的所有设置。它的内容取决于使用的特定的转换操作模块。请参阅单独的模块文档以了解详细信息。在我们的示例中，只是必须指定队列。不过我们还需发送UserID参数。转换操作将使用给定的UserID来模拟用户执行。
                </p><p>
                    转换操作在“配置”参数中UserID的用法可在所有的转换操作中使用（从OTRS
3.2.4版本之后）。在本示例中特别重要的是触发转换操作的用户（也就是UserID为123的用户）有没有移动工单到队列'Junk'的权限。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.6.7"></a>重复使用转换操作模块</h5></div></div></div><p>
                    要重复使用转换操作模块，只需在配置中指定多个转换操作。例如：
                </p><p>
                    </p><pre class="screen">
    $Self-&gt;{'Process::TransitionAction'} = {
        'TA1' =&gt; {
            Name   =&gt; 'Queue Move Junk',
            Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketQueueSet',
            Config =&gt; {
                Queue =&gt; 'Junk',
            },
        },
        'TA2' =&gt; {
            Name   =&gt; 'Queue Move Raw',
            Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketQueueSet',
            Config =&gt; {
                Queue =&gt; 'Raw',
            },
        },
    };
                    </pre><p>
                </p><p>
                    这里使用了同一个模块来移到一个流程工单到队列'Raw'，还有移到队列'junk'。一个特定转换使用的转换操作由流程配置中的‘路径’设置来确定。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="available-transition-actions"></a>可用的转换操作</h5></div></div></div><p>
                    OTRS自带了多个可在你的流程中使用的转换操作。在这里你可以找到它们的文档以及需要如何配置它们。
                </p><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.3"></a>DynamicFieldSet动态字段设置</h6></div></div></div><p>
                        在一个流程工单中设置一个或多个动态字段，示例：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Set DynamicField MasterSlave to Master and Approved to 1',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::DynamicFieldSet',
        Config =&gt; {
            MasterSlave =&gt; 'Master',
            Approved    =&gt; '1',

        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘MasterSlave主从’和‘Approved通过审批’就像动态字段名称一样指定，这个转换操作设置它们的值为（'Master' 和 '1'）。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.4"></a>TicketArticleCreate工单信件创建</h6></div></div></div><p>
                        创建一个信件，并用于创建备注或邮件回复。
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Article Create Note Internal',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketArticleCreate',
        Config =&gt; {
            ArticleType      =&gt; 'note-internal',                                        # note-external|phone|fax|sms|...
                                                                                        #   excluding any email type
            SenderType       =&gt; 'agent',                                                # agent|system|customer
            ContentType      =&gt; 'text/plain; charset=ISO-8859-15',                      # or optional Charset &amp; MimeType (e.g. 'text/html; charset=UTF-8')
            Subject          =&gt; 'some short description',                               # required
            Body             =&gt; 'the message text',                                     # required
            HistoryType      =&gt; 'OwnerUpdate',                                          # EmailCustomer|Move|AddNote|PriorityUpdate|WebRequestCustomer|...
            HistoryComment   =&gt; 'Some free text!',
            From             =&gt; 'Some Agent &lt;email@example.com&gt;',                       # not required but useful
            To               =&gt; 'Some Customer A &lt;customer-a@example.com&gt;',             # not required but useful
            Cc               =&gt; 'Some Customer B &lt;customer-b@example.com&gt;',             # not required but useful
            ReplyTo          =&gt; 'Some Customer B &lt;customer-b@example.com&gt;',             # not required
            InReplyTo        =&gt; '&lt;asdasdasd.12@example.com&gt;',                           # not required but useful
            References       =&gt; '&lt;asdasdasd.1@example.com&gt; &lt;asdasdasd.12@example.com&gt;', # not required but useful
            NoAgentNotify    =&gt; 0,                                                      # if you don't want to send agent notifications
            AutoResponseType =&gt; 'auto reply',                                           # auto reject|auto follow up|auto reply/new ticket|auto remove

            ForceNotificationToUserID   =&gt; [ 1, 43, 56 ],                               # if you want to force somebody
            ExcludeNotificationToUserID =&gt; [ 43, 56 ],
                 # if you want full exclude somebody from notifications,
                 # will also be removed in To: line of article,
                 # higher prio as ForceNotificationToUserID
            ExcludeMuteNotificationToUserID =&gt; [ 43, 56 ],
                 # the same as ExcludeNotificationToUserID but only the
                 # sending gets muted, agent will still shown in To:
                 # line of article
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定这个转换操作的名称。可以随意选择，但名称最好能体现转换操作的用途。
                    </p><p>
                        ‘ArticleType信件类型’定义创建的信件的类型。可能的值有：电话、传真、短信、WEB请求、备注-内部、备注-外部和备注-报告。
                    </p><p>
                        ‘SenderType发件人类型’定义信件发件人的类型。可能的值有：服务人员、系统、客户。
                    </p><p>
                        ‘ContentType内容类型’定义信件的内容类型。可能的值有：‘text/plain;
charset=ISO-8859-15纯文本’或其它有效的字符集和MIME类型。
                    </p><p>
                        ‘Subject主题’定义信件主题，必填。
                    </p><p>
                        ‘Body正文’定义信件的内容，必填。
                    </p><p>
                        ‘HistoryType历史类型’定义历史条目的类型。可能的值有：添加备注、归档标志更新、退回、客户更新、服务人员邮件、客户邮件、升级响应时间通知之前、升级响应时间通知开始、升级响应时间结束、升级解决时间通知之前、升级解决时间通知开始、升级解决时间结束、升级更新时间之前、升级更新时间开始、升级更新时间结束、跟进、转发、锁定、循环保护、合并、杂项、转换、新工单、所有者更新、服务人员电话、客户电话、优先级更新、移除、负责人更新、发送服务人员通知、发送答复、发送自动跟进、发送自动拒绝、发送自动回复、发送客户通知、服务更新、设置挂起时间、SLA更新、状态更新、关注、系统请求、工单动态字段更新、添加工单链接、删除工单链接、工时管理、类型更新、解锁、取消关注、客户WEB请求。
                    </p><p>
                        ‘HistoryComment历史注释’定义历史条目的内容。
                    </p><p>
                        'From发件人'、 'To收件人'、 'Cc抄送' 和 'ReplyTo回复'使用上面指定格式的邮件地址。
                    </p><p>
                        ‘InReplyTo作为答复’和‘References参考’使用邮件消息ID。
                    </p><p>
                        ‘NoAgentNotify无服务人员通知’-如果设置为1，不会发送服务人员的邮件通知。
                    </p><p>
                        ‘AutoResponseType自动响应类型’可以使用下列的值：自动跟进、自动拒绝、自动移除、自动回复、自动回复/新工单。
                    </p><p>
                        ‘ForceNotificationToUserID强制发送通知给UserID’、‘ExcludeNotificationToUserID为UserID排除通知’、‘ExcludeMuteNotificationToUserID为UserID排除静音通知’可以使用的UserID列表，给这些UserID的用户要么始终发送通知、不发送通知，要么加入发送清单但并不发送通知邮件。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.5"></a>工单创建</h6></div></div></div><p>
                        创建一个有信件的工单，这个新工单能够链接到流程工单。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Ticket Create',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketCreate',
        Config =&gt; {

            # ticket required:
            Title         =&gt; 'Some Ticket Title',
            Queue         =&gt; 'Raw',              # or QueueID =&gt; 123,
            Lock          =&gt; 'unlock',
            Priority      =&gt; '3 normal',         # or PriorityID =&gt; 2,
            State         =&gt; 'new',              # or StateID =&gt; 5,
            CustomerID    =&gt; '123465',
            CustomerUser  =&gt; 'customer@example.com',
            OwnerID       =&gt; 'someuserlogin',    # or OwnerID =&gt; 123,

            # ticket optional:
            TN              =&gt; $TicketObject-&gt;TicketCreateNumber(), # optional
            Type            =&gt; 'Incident',            # or TypeID =&gt; 1, not required
            Service         =&gt; 'Service A',           # or ServiceID =&gt; 1, not required
            SLA             =&gt; 'SLA A',               # or SLAID =&gt; 1, not required
            ResponsibleID   =&gt; 123,                   # not required
            ArchiveFlag     =&gt; 'y',                   # (y|n) not required
            PendingTime     =&gt; '2011-12-23 23:05:00', # optional (for pending states)
            PendingTimeDiff =&gt; 123 ,                  # optional (for pending states)

            # article required:
            ArticleType      =&gt; 'note-internal',                        # note-external|phone|fax|sms|...
                                                                        #   excluding any email type
            SenderType       =&gt; 'agent',                                # agent|system|customer
            ContentType      =&gt; 'text/plain; charset=ISO-8859-15',      # or optional Charset &amp; MimeType (e.g. 'text/html; charset=UTF-8')
            Subject          =&gt; 'some short description',               # required
            Body             =&gt; 'the message text',                     # required
            HistoryType      =&gt; 'OwnerUpdate',                          #
            EmailCustomer|Move|AddNote|PriorityUpdate|WebRequestCustomer|...
            HistoryComment   =&gt; 'Some free text!',

            # article optional:
            From             =&gt; 'Some Agent &lt;email@example.com&gt;',       # not required but useful
            To               =&gt; 'Some Customer A &lt;customer-a@example.com&gt;', # not required but useful
            Cc               =&gt; 'Some Customer B &lt;customer-b@example.com&gt;', # not required but useful
            ReplyTo          =&gt; 'Some Customer B &lt;customer-b@example.com&gt;', # not required
            MessageID        =&gt; '&lt;asdasdasd.123@example.com&gt;',          # not required but useful
            InReplyTo        =&gt; '&lt;asdasdasd.12@example.com&gt;',           # not required but useful
            References       =&gt; '&lt;asdasdasd.1@example.com&gt; &lt;asdasdasd.12@example.com&gt;', # not required but useful
            NoAgentNotify    =&gt; 0,                                      # if you don't want to send agent notifications
            AutoResponseType =&gt; 'auto reply'                            # auto reject|auto follow up|auto reply/new ticket|auto remove

            ForceNotificationToUserID   =&gt; [ 1, 43, 56 ],               # if you want to force somebody
            ExcludeNotificationToUserID =&gt; [ 43,56 ],                   # if you want full exclude somebody from notifications,
                                                                        # will also be removed in To: line of article,
                                                                        # higher prio as ForceNotificationToUserID
            ExcludeMuteNotificationToUserID =&gt; [ 43,56 ],               # the same as ExcludeNotificationToUserID but only the
                                                                        # sending gets muted, agent will still shown in To:
                                                                        # line of article
            TimeUnit                        =&gt; 123

            # other:
            DynamicField_NameX =&gt; $Value,
            LinkAs =&gt; $LinkType,                                        # Normal, Parent, Child, etc. (respective original ticket)
            UserID =&gt; 123,                                              # optional, to override the UserID from the logged user
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定这个转换操作的名称。可以随意选择，但名称最好能体现转换操作的用途。
                    </p><p>
                        ‘Title标题’工单的标题。
                    </p><p>
                        ‘Queue队列’或‘QueueID’指定用于新工单的队列名称或ID。
                    </p><p>
                        ‘Lock锁定’或‘LockID’设置工单的锁定状态。
                    </p><p>
                        ‘Priority优先级’或‘PriorityID’在新工单中指定优先级的名称或ID。
                    </p><p>
                        ‘State状态’或‘StateID’在新工单中指定状态的名称或ID。
                    </p><p>
                        ‘CustomerID客户ID’，为新工单设置客户ID。
                    </p><p>
                        ‘CustomerUser客户联系人’，分配给工单的客户登录名。
                    </p><p>
                        'Owner' or 'OwnerID', specifies the login or id of the agent that will be
the new ticket owner.
                    </p><p>
                        ‘TN’，新工单的客户编号。
                    </p><p>
                        ‘Type类型’或‘TypeID’，指定用于新工单的工单类型名称或ID。
                    </p><p>
                        ‘Service服务’或‘ServiceID’，指定用于新工单的服务名称或ID。
                    </p><p>
                        ‘SLA’或‘SLAID’，指定用于新工单的SLA名称或ID。
                    </p><p>
                        ‘ResponsibleID负责人ID’，新工单负责人的服务人员ID。
                    </p><p>
                        ‘PendingTime挂起时间’，预先定义的当工单状态属于一种挂起状态类型时工单的挂起时间。
                    </p><p>
                        ‘PendingTimeDiff挂起时间差’，当工单状态属于一种挂起状态类型时，给工单挂起时间设置一个动态时间（从当前时间按秒表示）。
                    </p><p>
                        ‘ArticleType信件类型’定义创建的信件的类型。可能的值有：电话、传真、短信、WEB请求、备注-内部、备注-外部和备注-报告。
                    </p><p>
                        ‘SenderType发件人类型’定义信件的发件人类型，可能的值有：服务人员、系统、客户。
                    </p><p>
                        ‘ContentType内容类型’定义信件的内容类型。可能的值有：‘text/plain;
charset=ISO-8859-15纯文本’或其它有效的字符集和MIME类型。
                    </p><p>
                        ‘Subject主题’定义信件主题，必填。
                    </p><p>
                        ‘Body正文’定义信件的内容，必填。
                    </p><p>
                        ‘HistoryType历史类型’定义历史条目的类型。可能的值有：添加备注、归档标志更新、退回、客户更新、服务人员邮件、客户邮件、升级响应时间通知之前、升级响应时间通知开始、升级响应时间结束、升级解决时间通知之前、升级解决时间通知开始、升级解决时间结束、升级更新时间之前、升级更新时间开始、升级更新时间结束、跟进、转发、锁定、循环保护、合并、杂项、转换、新工单、所有者更新、服务人员电话、客户电话、优先级更新、移除、负责人更新、发送服务人员通知、发送答复、发送自动跟进、发送自动拒绝、发送自动回复、发送客户通知、服务更新、设置挂起时间、SLA更新、状态更新、关注、系统请求、工单动态字段更新、添加工单链接、删除工单链接、工时管理、类型更新、解锁、取消关注、客户WEB请求。
                    </p><p>
                        ‘HistoryComment历史注释’定义历史条目的内容。
                    </p><p>
                        'From发件人'、 'To收件人'、 'Cc抄送' 和 'ReplyTo回复'使用上面指定格式的邮件地址。
                    </p><p>
                        ‘InReplyTo作为答复’和‘References参考’使用邮件消息ID。
                    </p><p>
                        ‘NoAgentNotify无服务人员通知’-如果设置为1，不会发送服务人员的邮件通知。
                    </p><p>
                        ‘AutoResponseType自动响应类型’可以使用下列的值：自动跟进、自动拒绝、自动移除、自动回复、自动回复/新工单。
                    </p><p>
                        ‘ForceNotificationToUserID强制发送通知给UserID’、‘ExcludeNotificationToUserID为UserID排除通知’、‘ExcludeMuteNotificationToUserID为UserID排除静音通知’可以使用的UserID列表，给这些UserID的用户要么始终发送通知、不发送通知，要么加入发送清单但并不发送通知邮件。
                    </p><p>
                        ‘时间单位’花费在当前工单信件上的时间，按秒、分钟或小时等表示。
                    </p><p>
                        ‘DynamicField_NameX’这里DynamicField_是必需的前缀，NameX是在新工单（在工单级而不是信件级）设置的动态字段的名称。
                    </p><p>
                        ‘LinkAs链接为’用来定义新工单与原始工单的关系，从新工单角度看，有普通（链接）、父（链接）、子（链接）等等。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.6"></a>TicketCustomerSet工单客户设置</h6></div></div></div><p>
                        设置一个流程工单的客户。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Customer Set Customer to test',
        Module =&gt; 'Kernel::System::Process::TransitionAction::TicketCustomerSet',
        Config =&gt; {
            No      =&gt; 'test',
            User    =&gt; 'client-user-123',
            # or in other words或用其它词
            # CustomerID     =&gt; 'client123',
            # CustomerUserID =&gt; 'client-user-123',

        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘No编号’或‘CustomerID客户ID’设置客户ID。
                    </p><p>
                        ‘User用户’或‘CustomerUserID客户联系人ID’设置客户的（登录）用户名。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.7"></a>TicketLockSet工单锁定设置</h6></div></div></div><p>
                        变更一个流程工单的锁定状态。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Set Lock to lock',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketLockSet',
        Config =&gt; {
            Lock   =&gt; 'lock',
            # or
            LockID =&gt; 2,
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘Lock锁定’定义流程新的锁定状态。
                    </p><p>
                        ‘LockID’定义新锁定状态的内部ID号。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.8"></a>TicketOwnerSet工单所有者设置</h6></div></div></div><p>
                        变更一个流程工单的所有者。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Owner Set root@localhost',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketOwnerSet',
        Config =&gt; {
            Owner =&gt; 'root@localhost',
            # or
            OwnerID =&gt; 1,
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘Owner所有者’指定新所有者的登录名。
                    </p><p>
                        ‘OwnerID’指定新所有者的内部ID号。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.9"></a>TicketQueueSet工单队列设置</h6></div></div></div><p>
                        移动工单到目标队列。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Queue Move Raw',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketQueueSet',
        Config =&gt; {
            Queue =&gt; 'Raw',
            # or
            # QueueID =&gt; '2',
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘Queue队列’指定目标队列的名称。
                    </p><p>
                        ‘QueueID队列ID’指定目标队列的内部ID号。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.10"></a>TicketResponsibleSet工单负责人设置</h6></div></div></div><p>
                        变更一个流程工单的负责人。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Responsible Set root@localhost',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketResponsibleSet',
        Config =&gt; {
            Responsible =&gt; 'root@localhost',
            # or
            ResponsibleID =&gt; 1,
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘Responsible负责人’指定新负责人的登录名。
                    </p><p>
                        ‘ResponsibleID负责人ID’指定新负责人的内部ID。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.11"></a>TicketServiceSet工单服务设置</h6></div></div></div><p>
                        给一个流程工单分配一个服务。工单需要有一个客户，服务必须分配给那个客户。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Set MyService service',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketServiceSet',
        Config =&gt; {
            Service   =&gt; 'MyService',
            # or
            ServiceID =&gt; 123,
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘Service服务’定义流程工单的新服务。需要服务的全名（如GramdFatherService::FatherService::SonService）。
                    </p><p>
                        ‘ServiceID服务ID’定义新服务的内部ID号。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.12"></a>TicketSLASet工单SLA设置</h6></div></div></div><p>
                        给一个流程工单分配一个服务级别协议。工单需要有一个服务，SLA（服务级别协议）必须分配给那个服务。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Set MySLA SLA',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketSLASet',
        Config =&gt; {
            SLA   =&gt; 'MySLA',
            # or
            SLAID =&gt; 123,
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘SLA’定义流程工单新的服务级别协议。
                    </p><p>
                        ‘SLAID’定义新SLA的内部ID号。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.13"></a>TicketStateSet工单状态设置</h6></div></div></div><p>
                        变更一个流程工单的状态。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Set State to open',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketStateSet',
        Config =&gt; {
            State   =&gt; 'open',
            # or
            StateID =&gt; 4,

            PendingTimeDiff =&gt; 123,
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘State状态’定义流程工单新的状态。
                    </p><p>
                        ‘StateID’定义新状态的内部ID号。
                    </p><p>
                        ‘PendingTimeDiff挂起时间差’仅用于挂起类型的状态，定义相对时间差秒数（相对于转换操作的执行时间）以便设置工单挂起时间，例如3600意味着挂起时间是在转换操作执行后的1小时。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.14"></a>TicketTitleSet工单标题设置</h6></div></div></div><p>
                        设置一个流程工单的标题。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Set Ticket Title to Ticket-title',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketTitleSet',
        Config =&gt; {
            Title =&gt; 'Ticket-title',
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘Title标题’指定工单的新标题。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.6.8.15"></a>TicketTypeSet工单类型设置</h6></div></div></div><p>
                        设置一个流程工单的工单类型。例如：
                    </p><p>
                        </p><pre class="screen">
$Self-&gt;{'Process::TransitionAction'} = {
    'TA1' =&gt; {
        Name   =&gt; 'Set Ticket Type to default',
        Module =&gt; 'Kernel::System::ProcessManagement::TransitionAction::TicketTypeSet',
        Config =&gt; {
            Type     =&gt; 'default',
            # or
            # TypeID =&gt; '1',
        },
    },
};
                        </pre><p>
                    </p><p>
                        ‘Name名称’指定配置的转换操作的名称。
                    </p><p>
                        ‘Type类型’指定工单类型的名称。
                    </p><p>
                        ‘TypeID’指定工单类型的内部ID。
                    </p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="process-management-acl"></a>访问控制列表（ACL）</h4></div></div></div><p>
                在ACL的帮助下，你可以在流程工单中限制可选择的值。另请参阅<a class="link" href="customization.html#acl-reference" title="ACL设置参考">ACL参考</a>以获取全部工单ACL语法的描述。
            </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.7.3"></a>ACL 配置</h5></div></div></div><p>
                    只可以在文件<code class="filename">Kernel/Config.pm</code>中定义ACL。例如：
                </p><p>
                    </p><pre class="screen">
$Self-&gt;{TicketAcl}-&gt;{'001-ACL-ProcessProperties'} = {
    Properties =&gt; {
        Process =&gt; {
            ProcessEntityID        =&gt; ['P1'],
            ActivityEntityID       =&gt; ['A1'],
            ActivityDialogEntityID =&gt; ['AD1'],
        }
    },
    Possible =&gt; {
        ActivityDialog =&gt; ['AD1', 'AD3'],
    },
    PossibleNot =&gt; {
        ActivityDialog =&gt; ['AD3'],
    },
};
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.7.4"></a>001-ACL-ProcessProperties</h5></div></div></div><p>
                    ACL规则的名称。ACL规则的更多的信息，请查阅<a class="link" href="customization.html#acl" title="访问控制列表（ACL）">ACL手册</a>。
                </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.7.5"></a>流程</h5></div></div></div><p>
                    这部分用于检查是否必须应用一个ACL。如果指定了值，就是应用了ACL规则，可以使用下列值：
                </p><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.7.5.3"></a>ProcessEntityID 流程实体ID</h6></div></div></div><p>
                        一个流程的ID，如果工单分配到这个流程，则匹配成功。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.7.5.4"></a>ActivityEntityID 活动实体ID</h6></div></div></div><p>
                        流程工单目前分配的活动的ID。
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.7.3.5.7.5.5"></a>ActivityDialogEntityID 活动对话框实体ID</h6></div></div></div><p>
                        一个流程工单目前打开的活动对话框的ID。
                    </p></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.7.3.5.7.6"></a>可能的/不可能的 活动对话框</h5></div></div></div><p>
                    在这里你可以指定活动对话框ID清单。这个清单限制了在工单详情窗口提供给用户的可用活动对话框。
                </p><p>
                    ‘Possible 可能的’列出允许的活动对话框。上面示例的设置在配置的活动对话框清单中仅允许'AD1'和'AD3'。
                </p><p>
                    ‘PossibleNot 不可能的’列出不允许的活动对话框。在上面的示例中，这个设置从配置的活动对话框清单中移除'AD3'。
                </p><p>
                    如果同时指定了‘Possible可能的’和‘PossibleNot
不可能的’，配置的活动对话框将首先用‘Possible可能的’过滤，在我们的示例中仅留下'AD1'和'AD3'。然后应用‘PossibleNot
不可能的’，过滤掉'AD3'，所以最终只有'AD1'保留下来，显示为用户能够使用的可用活动对话框。
                </p><p>
                    如果匹配了多个ACL规则，则计算所有匹配规则的交集来确定可能的活动对话框。例如：
                </p><p>
                    配置的活动对话框：'AD1'、'AD2'、 'AD3'、 'AD4'、 'AD5'、 'AD6'、'AD7'。
                </p><p>
                    </p><pre class="screen">
$Self-&gt;{TicketAcl}-&gt;{'001-ACL-Status'} = {
    Properties =&gt; {
        Ticket =&gt; {
            Status =&gt; 'new',
        }
    },
    Possible =&gt; {
        ActivityDialog =&gt; ['AD1', 'AD2', 'AD3', 'AD6', 'AD7'],
    },
};
$Self-&gt;{TicketAcl}-&gt;{'002-ACL-Queue'} = {
    Properties =&gt; {
        Ticket =&gt; {
            Queue =&gt; ['Raw']
        }
    },
    Possible =&gt; {
        ActivityDialog =&gt; ['AD2', 'AD3', 'AD4', 'AD7'],
    },
};
$Self-&gt;{TicketAcl}-&gt;{'003-ACL-Priority'} = {
    Properties =&gt; {
        Ticket =&gt; {
            Priority =&gt; ['3 normal']
        }
    },
    PossibleNot =&gt; {
        ActivityDialog =&gt; ['AD3', 'AD4'],
    },
};
                    </pre><p>
                </p><p>
                    如果一个流程工单的状态为‘new新建’、在‘Raw’队列且优先级为‘3 - 正常’，则会匹配所有的3条ACL规则。
                </p><p>
                    第一条规则减少活动对话框，从'AD1'、'AD2'、 'AD3'、 'AD4'、 'AD5'、 'AD6'、'AD7'变成了'AD1'、'AD2'、
'AD3'、 'AD6'、'AD7'，禁用了'AD4'和'AD5'。
                </p><p>
                    第二条规则会进一步减少剩余的活动对话框。在我们的示例中，仅存'AD2'、 'AD3'、'AD7'。
                </p><p>
                    现在第三条规则通过'PossibleNot
不可能的'会进一步减少这个清单。从清单中移除'AD3'。没有移除'AD4'，因为它并没有在先前的清单中。最终，'AD2'和AD7'保留为用户能够使用的可用活动对话框。
                </p><p>
                    还可以限制能够显示在“新流程工单”窗口的流程。这个功能与限制活动对话框类似，除了一点：ACL只能基于用户。
                </p><p>查看下面的示例：</p><p>
                    </p><pre class="screen">
$Self-&gt;{TicketAcl}-&gt;{'200-ACL-Process'} = {
    # match properties
    Properties =&gt; {
        User =&gt; {
            UserID =&gt; [2, 3],
        },
    },
    Possible =&gt; {
       Process =&gt; ['P1', 'P2', 'P3'],
    },
    PossibleNot =&gt; {
        Process =&gt; ['P4'],
    },
};
                    </pre><p>
                </p><p>
                    </p><pre class="screen">
$Self-&gt;{TicketAcl}-&gt;{'201-ACL-Process'} = {
    # match properties
    Properties =&gt; {
        User =&gt; {
            Group_rw =&gt; [ 'MyGroup' ],
        },
    },
    Possible =&gt; {
       Process =&gt; ['P1', 'P2', 'P3'],
    },
    PossibleNot =&gt; {
        Process =&gt; ['P4'],
    },
};
                    </pre><p>
                </p><p>
                    </p><pre class="screen">
$Self-&gt;{TicketAcl}-&gt;{'202-ACL-Process'} = {
    # match properties
    Properties =&gt; {
        User =&gt; {
            Role =&gt; [ 'MyRole' ],
        },
    },
    Possible =&gt; {
       Process =&gt; ['P1', 'P2', 'P3'],
    },
    PossibleNot =&gt; {
        Process =&gt; ['P4'],
    },
};
                    </pre><p>
                </p></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="customization.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="customization.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="themes.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 5. 定制 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 创建你自己的主题</td></tr></table></div></body></html>
